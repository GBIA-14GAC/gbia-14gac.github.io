<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Encontro dos 10 anos - Brothers In Arms</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
      color: #333;
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      color: #d32f2f;
      font-size: 1.4em;
    }
    .event-info {
      background-color: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      text-align: center;
      font-size: 14px;
      line-height: 1.6;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #444;
    }
    input, button {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 16px;
      box-sizing: border-box;
    }
    button {
      background-color: #d32f2f;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      margin-top: 20px;
      font-size: 17px;
    }
    button:hover {
      background-color: #b71c1c;
    }
    .success {
      color: #2e7d32;
      text-align: center;
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.1em;
    }
    .error {
      color: #c62828;
      font-size: 14px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>üéâ Encontro dos 10 anos do grupo "Brothers In Arms!"</h1>

  <div class="event-info">
    <strong>Local:</strong> CCFD<br>
    <strong>Data:</strong> S√°bado, 27 de setembro<br>
    <strong>Hor√°rio:</strong> Das 10h √†s 18h
  </div>

  <p style="text-align: center; margin-bottom: 20px;">
    Confirme sua presen√ßa e ajude a organizar o churrasco!
  </p>

  <div id="form-container">
    <div class="form-group">
      <label for="nomeCompleto">Nome Completo *</label>
      <input type="text" id="nomeCompleto" placeholder="Seu nome completo" required />
    </div>

    <div class="form-group">
      <label for="nomeGuerra">Nome de Guerra (opcional)</label>
      <input type="text" id="nomeGuerra" placeholder="Como te chamam no grupo" />
    </div>

    <div class="form-group">
      <label for="telefone">Telefone (com WhatsApp) *</label>
      <input type="text" id="telefone" placeholder="(XX) 9XXXX-XXXX" required />
    </div>

    <div class="form-group">
      <label for="adultos">Quantos adultos ir√£o? *</label>
      <input type="number" id="adultos" min="1" value="1" required />
    </div>

    <div class="form-group">
      <label for="criancas">Quantas crian√ßas (at√© 12 anos)?</label>
      <input type="number" id="criancas" min="0" value="0" />
    </div>

    <button onclick="enviarFormulario()">Confirmar Presen√ßa</button>
    <p class="error" id="errorMsg" style="display: none;">Por favor, preencha todos os campos obrigat√≥rios.</p>
  </div>

  <div id="resultado"></div>

  <script>
    // M√°scara para telefone: (XX) 9XXXX-XXXX
    document.getElementById("telefone").addEventListener("input", function(e) {
      let value = e.target.value.replace(/\D/g, "");
      let formatted = "";

      if (value.length > 0) {
        formatted = "(" + value.substring(0, 2);
        if (value.length >= 3) {
          formatted += ") " + value.substring(2, 3);
        }
        if (value.length >= 4) {
          formatted += value.substring(3, 7);
        }
        if (value.length >= 8) {
          formatted += "-" + value.substring(7, 11);
        }
      }

      e.target.value = formatted;
    });

    function enviarFormulario() {
      const nomeCompleto = document.getElementById("nomeCompleto").value.trim();
      const nomeGuerra = document.getElementById("nomeGuerra").value.trim() || "N√£o informado";
      const telefone = document.getElementById("telefone").value.trim();
      const adultos = document.getElementById("adultos").value;
      const criancas = document.getElementById("criancas").value;
      const errorMsg = document.getElementById("errorMsg");

      // Limpar mensagem de erro
      errorMsg.style.display = "none";

      // Valida√ß√£o
      if (!nomeCompleto || !telefone || !adultos) {
        errorMsg.style.display = "block";
        return;
      }

      // Validar telefone: pelo menos 10 d√≠gitos (sem contar 9 inicial opcional)
      const phoneDigits = telefone.replace(/\D/g, "");
      if (phoneDigits.length < 10 || phoneDigits.length > 11) {
        errorMsg.textContent = "Por favor, insira um telefone v√°lido com DDD.";
        errorMsg.style.display = "block";
        return;
      }

      // Dados a serem enviados
      const dados = {
        nomeCompleto,
        nomeGuerra,
        telefone,
        adultos: parseInt(adultos),
        criancas: parseInt(criancas)
      };

      // üîÅ SUBSTITUA ESTA URL PELA DO SEU GOOGLE APPS SCRIPT
      //const scriptURL = "https://script.google.com/macros/s/XXXXXXXXXXXXXXXXXXXXXXXXXXXXX/exec";
      const scriptURL = "https://script.google.com/macros/s/AKfycbxoF7zmnNqDcxJ7gCfPAjbsyUAtMI4C0X8JzgMHkbpwhZjImDMA5wRKVFVRnXaUnIAIKw/exec";

      fetch(scriptURL, {
        method: "POST",
        mode: "no-cors", // Limita√ß√£o de CORS, mas o envio ainda funciona
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(dados)
      });

      // Feedback de sucesso
      document.getElementById("form-container").style.display = "none";
      document.getElementById("resultado").innerHTML = `
        <p class="success">
          üéâ Show, ${nomeCompleto.split(" ")[0]}!<br><br>
          Sua presen√ßa est√° confirmada!<br>
          Vamos nos encontrar no <strong>CCFD</strong> no dia <strong>27 de setembro</strong>.<br><br>
          Contamos com ${adultos} adulto(s) e ${criancas} crian√ßa(s).<br><br>
          At√© l√°, Brothers In Arms!
        </p>
      `;
    }
  </script>
</body>
</html>
